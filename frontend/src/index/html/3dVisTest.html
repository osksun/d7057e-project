<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { display: block; }
		</style>
		<script src="../js/3d-visualization.js"></script>
		<script src="../../../res/lib/three/three.js"></script>

	</head>
	<body>
		<div>
			<input type="text" id="xInput" name="xInput">x
			<input type="test" id="yInput" name="yInput">y
			<input type="test" id="zInput" name="zInput">z
			<input type="test" id="planeConstantInput" name="planeConstantInput">constant
			<button type="button" id="addPlaneButton" onclick="userCreatePlane(scene, xInput.value, yInput.value, zInput.value, planeConstant.value, 20, 0x00ff00)"> Add plane</button>
		</div>

		<script>
			document.addEventListener( 'wheel', zoom, false );
			xInput = document.getElementById("xInput");
			yInput = document.getElementById("yInput");
			zInput = document.getElementById("zInput");
			planeConstantInput = document.getElementById("planeConstantInput");
			let scene = new THREE.Scene();
			let camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 500 );
			let renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth/2, window.innerHeight/2 );
			document.body.appendChild( renderer.domElement );

			let geometry0 = new THREE.BoxGeometry();
			let materialgreen = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
			let materialRed = new THREE.MeshBasicMaterial({color: 0xff0000})
			let cube = new THREE.Mesh( geometry0, materialgreen );

			var geo = new THREE.PlaneBufferGeometry(10, 10, 4, 4);
			var mat = new THREE.MeshBasicMaterial({ color: 0xff00ff, side: THREE.DoubleSide });
			var plane = new THREE.Mesh(geo, mat);

			//let optionalNormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );
			let points = [];
			let myPlaneGeo = new THREE.PlaneBufferGeometry(10,10, 3,3);
			let myPlane = new THREE.Plane(new THREE.Vector3(0, 1, 0), 0);
			points.push( new THREE.Vector3(-10,0,-1));
			points.push( new THREE.Vector3(0,10,-1));
			points.push( new THREE.Vector3(10,0,-1));
			points.push( new THREE.Vector3(-10,0,-1));
			let geometry1 = new THREE.BufferGeometry().setFromPoints( points );
			let materialblue = new THREE.LineBasicMaterial( {color: 0x0000ff});

			var superPlane = new THREE.Plane( new THREE.Vector3( 1, -1, 1 ), 1 );
			var helper = new THREE.PlaneHelper( myPlane, 30, 0xff0000 );
			scene.add( helper );
			let line = new THREE.Line( geometry1, materialblue );
			plane.rotateX( - Math.PI / 3);
			camera.position.set(0,4,20);
			camera.lookAt(0,0,0)
			scene.add(plane);
			scene.add( cube );
			scene.add( line );
			animate();
		</script>
	</body>
</html>